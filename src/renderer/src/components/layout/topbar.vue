<script setup lang="ts">
import { onMounted } from 'vue'
import { useI18n } from 'vue-i18n'

const i18n = useI18n()

onMounted(() => {
  handleWindowControls()
})

function handleWindowControls(): void {
  //@ts-ignore
  document.getElementById('min-button').addEventListener('click', () => {
    window.electron.ipcRenderer.send('minimize')
  })

  //@ts-ignore
  document.getElementById('max-button').addEventListener('click', () => {
    window.electron.ipcRenderer.send('maximize')
  })

  //@ts-ignore
  document.getElementById('close-button').addEventListener('click', async () => {
    window.electron.ipcRenderer.send('close')
  })
}
</script>
<template>
  <div
    id="drag-region"
    class="flex items-center justify-between w-full h-8 min-h-8 mx-2 pl-2 rounded-lg bg-surface-50 opacity-80"
  >
    <div>
      <span class="">TrackUp</span>
    </div>
    <div>
      <span class="">Contenu</span>
    </div>
    <div id="window-controls" class="flex items-center justify-center h-full w-fit">
      <div
        id="min-button"
        class="h-full w-11 flex justify-center items-center bg-surface-50 opacity-80 hover:bg-surface-200 hover:cursor-pointer text-gray-600 hover:text-black"
        :title="i18n.t('topbar.minimize')"
      >
        <i class="pi pi-minus"></i>
      </div>
      <div
        id="max-button"
        class="h-full w-11 flex justify-center items-center bg-surface-50 opacity-80 hover:bg-surface-200 hover:cursor-pointer text-gray-600 hover:text-black"
        :title="i18n.t('topbar.maximize')"
      >
        <i class="pi pi-sort"></i>
      </div>
      <div
        id="close-button"
        class="h-full w-11 rounded-r-lg flex justify-center items-center bg-surface-50 opacity-80 hover:bg-red-500 hover:cursor-pointer text-gray-800 hover:text-white"
        :title="i18n.t('topbar.close')"
      >
        <i class="pi pi-times"></i>
      </div>
    </div>
  </div>
</template>
<style scoped>
#drag-region {
  -webkit-app-region: drag;
}

#window-controls {
  -webkit-app-region: no-drag;
}
</style>
